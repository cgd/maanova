<html><head><title>Read Micro Array data from TAB delimited simple text file</title>
<link rel="stylesheet" type="text/css" href="Rchm.css">
</head>
<body>

<table width="100%"><tr><td>read.madata(maanova)</td><td align="right">R Documentation</td></tr></table><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
<param name="keyword" value="R:   read.madata">
<param name="keyword" value=" Read Micro Array data from TAB delimited simple text file">
</object>


<h2>Read Micro Array data from TAB delimited simple text file</h2>


<h3>Description</h3>

<p>
This is the function to read MicroArray experiment data from a TAB 
delimited simple text file.
</p>


<h3>Usage</h3>

<pre>
read.madata(datafile, designfile="design.txt", header=TRUE, spotflag=TRUE,
            metarow, metacol, row, col, pmt, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>datafile</code></td>
<td>
The data file name with path name as a string.</td></tr>
<tr valign="top"><td><code>designfile</code></td>
<td>
The design file name with path as a string.</td></tr>
<tr valign="top"><td><code>header</code></td>
<td>
A logical value indicating whether the data file
contains the column headers.</td></tr>
<tr valign="top"><td><code>spotflag</code></td>
<td>
A flag to indicate whether the input file contain the
flag for bad spot or not.</td></tr>
<tr valign="top"><td><code>metarow</code></td>
<td>
The column number for meta row. Default values are 1s.</td></tr>
<tr valign="top"><td><code>metacol</code></td>
<td>
The column number for meta column. Default values are 1s.</td></tr>
<tr valign="top"><td><code>row</code></td>
<td>
The column number for row. Default value is NA.</td></tr>
<tr valign="top"><td><code>col</code></td>
<td>
The column number for column. Default value is NA.</td></tr>
<tr valign="top"><td><code>pmt</code></td>
<td>
The start column number for pmt data.</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
Other gene information in the data file.</td></tr>
</table>

<h3>Value</h3>

<p>
An object of class <code>rawdata</code>, which is a list of following
components:
</p>
<table summary="R argblock">
<tr valign="top"><td><code>n.array</code></td>
<td>
Number of arrays in the experiment.</td></tr>
<tr valign="top"><td><code>n.dye</code></td>
<td>
Number of dyes.</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
Two channel experiment data.</td></tr>
<tr valign="top"><td><code>flag</code></td>
<td>
A matrix for spot flag. Each element corresponding to one
spot. 0 means normal spot, all other values mean bad spot.</td></tr>
<tr valign="top"><td><code>metarow</code></td>
<td>
Meta row for each spot.</td></tr>
<tr valign="top"><td><code>metacol</code></td>
<td>
Meta column for each spot.</td></tr>
<tr valign="top"><td><code>row</code></td>
<td>
Row for each spot.</td></tr>
<tr valign="top"><td><code>col</code></td>
<td>
Column for each spot.</td></tr>
<tr valign="top"><td><code>ArrayName</code></td>
<td>
A list of strings to represent the names of the pmt
data. There are two names per array.</td></tr>
<tr valign="top"><td><code>design</code></td>
<td>
An object to represent the experimental design.</td></tr>
<tr valign="top"><td><code>Others</code></td>
<td>
Other experiment information listed in the data file and
specified by user.</td></tr>
</table>

<h3>Preparing data file</h3>

<p>
Before using the package, user need to prepare the input data
file. The data file is a TAB delimited text file. In this file, each
row corresponding to a gene. In the columns, you can put some gene
specific information, e.g., the Clone ID, Gene Bank ID, etc. and the
grid location of the spot. But most importantly you need to put the
pmt data after that. Most of the MicroArray gridding softwares
generate one file for each slide. At this point, you need to manually
combine them into the data file. You need to decide which data you
want to use in analysis, e.g., mean versus median, backgroud
subtracted or not, etc. For N-dye array, your pmt data should have N
columns for each array.  These N columns need to
be adjacent to each other. You can put the spot flag as a column after
pmt data for each array. (Note that if you have flag, you will have N+1
columns data for each array.) If you have replicates, replicated
measurements of the same clone on the same array should appear in
adjacent rows.   
</p>
<p>
For example, for a 2-dye cDNA array,
you have four slides scanned by Gene Pix and you get four
files. First you open your favorite Spreed Sheet editor, e.g., MS
Excel. Copy your clone ID and Cluster ID to the first 2 columns. Then
open one of the files generated by Gene Pix, copy the grid location
into next 4 columns (you only need to do this once because they are
all the same for four slides). Then for all four files, copy the two
columns of foreground median value (if you want to use it) and one
column of flag to the file in the order of Cy5, Cy3, flag. Then select
the whole file and row sort it according to Clone ID. Save the file as
tab delimited text file and you are done.
</p>
<p>
The data file must be "full", that is, all rows have to have same
number of fields. Sometimes leading and trailing TAB in the text file
will bring problems, depends on the operating system. So user need to
be careful about that.
</p>


<h3>Preparing design file</h3>

<p>
Design file is another TAB delimited text file. Number of rows of this
file equals number of arrays times N (the number of dyes).
Number of columns of this file
depends on the experimental design. For example, you can have
"Strain", "Diet", "Sex", etc. in your design file. You *MUST* have a
column named "Sample" (case sensitive) in the design file. It should be 
integers to represent the biological individuals. Reference samples
should have Sample number to be zero(0). Reference sample will always be
treated as fixed factor in mixed model and it will not be involved in
any test. You also must have "Array" and "Dye" columns in the design
file. You must NOT have "Spot" and "Label" columns. They are reserved
for spotting and labelling effects. 
</p>
<p>
Note that you don't have to *USE* all factors in design file. In
making the model object in <code><a makeModel.html>makeModel</a></code>, the
experimental design will be determined by the design and a formula.
You can put all factors in design file but turn them on/off in
formula.
</p>


<h3>Read pre-transformed data</h3>

<p>
You can use other softwares to do data transformation and read in the
pre-transformed data into R/maanova. If that is the case, you should
skip the log2 transformation in <code><a createData.html>createData</a></code> by
setting log.trans=FALSE. And you should do
<code><a riplot.html>riplot</a></code> and <code><a arrayview.html>arrayview</a></code>
on the result of <code>createData</code>. Because <code>riplot</code> and
<code>arrayview</code> assume the data in <code>rawdata</code> object is on raw
scale.
</p>


<h3>Author(s)</h3>

<p>
Hao Wu
</p>


<h3>Examples</h3>

<pre>
# note that data files are not distributed with the package,
# read in a file with spot flag
## Not run: 
kidney.raw &lt;- read.madata("kidney.txt", designfile="kidneydesign.txt", 
        metarow=1, metacol=2, col=3, row=4, Name=5, ID=6,
        pmt=7, spotflag=TRUE)
## End(Not run)
# read in a file without spot flag
## Not run: 
rawdata &lt;- read.madata("paigen.txt", designfile="design.txt",cloneid=1, 
        metarow=2, metacol=3, row=4, col=5, pmt=6, spotflag=FALSE)
## End(Not run)
</pre>



<hr><div align="center">[Package <em>maanova</em> version 1.2.0 <a href="00Index.html">Index]</a></div>

</body></html>
